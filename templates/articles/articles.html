{% extends "base.html" %}

{% block title %}CodyLife | Maqolalar{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-6 py-8 grid grid-cols-1 lg:grid-cols-4 gap-8">

    <!-- LEFT: Articles -->
    <main class="lg:col-span-6 space-y-6">

        <!-- Header -->
        <div class="flex items-center justify-between">
            <h1 class="text-2xl font-semibold">
                Maqolalar
            </h1>
            {% if request.user.is_staff %}
            <a href="#"
               class="px-4 py-2 rounded-md text-sm font-medium
                      bg-primary hover:bg-blue-600 transition">
                + Yangi maqola
            </a>
            {% endif %}
        </div>

        <!-- Article card -->
        {% for article in articles %}
        <article class="bg-cardDark border border-borderDark rounded-lg p-6 space-y-4">

            <!-- Meta -->
            <div class="flex items-center gap-3 text-sm">
                {% if article.author.picture %}
                    <img src="{{ article.author.picture.url }}"
                         class="w-8 h-8 rounded-full object-cover border border-borderDark">
                {% else %}
                    <div class="w-8 h-8 rounded-full bg-gray-800
                                flex items-center justify-center text-xs font-medium">
                        {{ article.author.username|first|upper }}
                    </div>
                {% endif %}

                <span class="font-medium">
                    {{ article.author.username }}
                </span>

                <span class="text-textMuted">
                    {{ article.created_date|date:"M d, Y" }}
                </span>
            </div>

            <!-- Title -->
            <a href="#">
                <h2 class="text-xl font-semibold hover:text-primary transition">
                    {{ article.title }}
                </h2>
            </a>

            <!-- Excerpt -->
            <p class="text-sm text-textMuted leading-relaxed line-clamp-3">
                {{ article.body|truncatewords:40 }}
            </p>

            <!-- Footer -->
            <div class="flex items-center justify-between pt-4 border-t border-borderDark text-sm">

                <a href="{% url 'article-detail' article.slug %}"
                   class="text-primary hover:underline">
                    O‘qish →
                </a>
            </div>

        </article>
        {% empty %}
            <p class="text-sm text-textMuted">
                Hozircha maqolalar mavjud emas.
            </p>
        {% endfor %}

    </main>

    <!-- RIGHT: Sidebar -->
    <!-- <aside class="space-y-6">

        <!-- Categories -->
        <!-- <div class="bg-cardDark border border-borderDark rounded-lg p-4">
            <h3 class="text-sm font-semibold mb-3">
                Kategoriyalar
            </h3>

            <ul class="space-y-2 text-sm">
                <li><a href="#" class="text-textMuted hover:text-white">Backend</a></li>
                <li><a href="#" class="text-textMuted hover:text-white">Frontend</a></li>
                <li><a href="#" class="text-textMuted hover:text-white">DevOps</a></li>
                <li><a href="#" class="text-textMuted hover:text-white">Python</a></li>
            </ul>
        </div> -->

        <!-- Popular -->
        <!-- <div class="bg-cardDark border border-borderDark rounded-lg p-4">
            <h3 class="text-sm font-semibold mb-3">
                Mashhur maqolalar
            </h3>

            <ul class="space-y-3 text-sm">
                <li>
                    <a href="#" class="hover:text-primary">
                        Django signals explained
                    </a>
                </li>
                <li>
                    <a href="#" class="hover:text-primary">
                        Clean code in Python
                    </a>
                </li>
            </ul>
        </div> -->

    <!-- </aside> --> 

</div>
{% endblock %}
